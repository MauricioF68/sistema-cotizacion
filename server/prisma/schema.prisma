generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = "file:./dev.db" 
}

// Sedes
model Planta {
  id      Int              @id @default(autoincrement())
  nombre  String           @unique
  costos  CostoIndirecto[]
}

// 2. Tarea
model Operacion {
  id      Int              @id @default(autoincrement())
  nombre  String           @unique
  costos  CostoIndirecto[]
}

// 3. Cantiad
model Rango {
  id      Int              @id @default(autoincrement())
  nombre  String           @unique 
  orden   Int              @default(0) 
  costos  CostoIndirecto[]
}

model Usuario {
  id        Int      @id @default(autoincrement())
  nombre    String?  
  dni       String   @unique
  creadoEn  DateTime @default(now())
}

// 4. Costo
model CostoIndirecto {
  id          Int   @id @default(autoincrement())
  monto       Float 

  plantaId    Int
  planta      Planta    @relation(fields: [plantaId], references: [id])

  operacionId Int
  operacion   Operacion @relation(fields: [operacionId], references: [id])

  rangoId     Int
  rango       Rango     @relation(fields: [rangoId], references: [id])

  
  @@unique([plantaId, operacionId, rangoId])
}

